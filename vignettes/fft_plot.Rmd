---
title: "plot.fft() function"
author: "Nathaniel Phillips"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Visualizing FFTs with plot()}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


```{r, echo = F, message = F, results = 'hide'}
library(FFTrees)
```

This function visualizes FFTs. The best way to use the function is to create an fft object with `fft()`, then apply `plot()` to the object

## Creating an fft object

Let's start with an example, we'll create an fft object called `titanic.fft` from the `titanic` dataset:

```{r}
titanic.fft <- fft(
  formula = survived ~.,
  data = titanic
  )
```



## Visualizing individual trees

Once you've created an fft object using `fft()` you can visualize the tree (and ROC curves) using `plot()`. There are two main arguments:

- `which.tree`: Which tree do you want to plot? You can specify an integer such as `which.tree = 2` will plot the tree #2 in the fft object, or `which.tree = "best.train"` which will use the best training tree.

- `which.data`: Which data do you want to apply the tree to? Currently, you can either use the training dataset with `which.data = "train"` or the test dataset with `which.data = "test"`. 

Let's plot the best training tree for the heartdisease data when applied to the test dataset:

```{r, fig.width = 6, fig.height = 6}
plot(titanic.fft,
     description = "Titanic",
     decision.names = c("Died", "Survived")
     )
```

Here's how to interpret this tree: if *thal* is greater than 3, classify as signal ("+ disease"). For this dataset, 72 cases (18 true noise + 54 true signal) were classified as signal while the remaining 80 cases (152 - 72) moved to the next level. Now, if *cp* is less than 4, classify as noise ("- disease"). Here, of the remaining 80 cases, 50 (45 true noise and 5 true signal) were classified as noise ("- disease"). This left 30 cases which were classified at the final level.

Cumulative classification statistics are showin in the bottom panel of the plot. 

Now let's compare the result to tree # 1. This is a *very* conservative tree with Noise exits on all but the last branch. This tree should have a very low false-alarm rate but (unfortunately) also a very low hit-rate.

```{r, fig.width = 6, fig.height = 6}
plot(titanic.fft,
     which.tree = 1,
     description = "Heart Disease",
     decision.names = c("Healthy", "Disease")
     )
```

Indeed, this tree is very conservative: only 23 cases were classified as signals ("+ disease") at the very end of the tree.

