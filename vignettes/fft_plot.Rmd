:---
title: "plot.fft() function"
author: "Nathaniel Phillips"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Visualizing FFTs with plot()}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


```{r, echo = F, message = F, results = 'hide'}
library(FFTrees)
```

Applying the `plot()` function to an `fft` object will visualize the tree.

## Creating an fft object

Let's start with an example, we'll create an fft object called `titanic.fft` from the `titanic` dataset:

```{r}
titanic.fft <- fft(
  formula = survived ~.,
  data = titanic
  )
```


## Plotting a tree

To plot the tree, use `plot()`:

```{r}
plot(titanic.fft)
```

You can specify additional arguments to the `plot()` command that will change what is displayed

- `which.tree`: Which tree do you want to plot? You can specify an integer such as `which.tree = 2` will plot the tree #2 in the fft object, or `which.tree = "best.train"` which will use the best training tree.

- `data`: Which data do you want to apply the tree to? You can specify `data = "train"` or `data = "test"` to use the training or testing datasets stored in the `fft` object. Alternatively, you can specify a new dataset (e.g.; `data = test.data`

For example, let's plot tree # 4 with `which.tree = 4`.

```{r}
plot(titanic.fft, 
     which.tree = 4)
```

Now let's apply this tree to a new dataset. I'll apply the tree to only data from children:

```{r}
plot(titanic.fft,
     which.tree = 2,
     data = subset(titanic, age == "child"),
     )
```



Let's plot the best training tree for the heartdisease data when applied to the test dataset:

```{r, fig.width = 6, fig.height = 6}
plot(titanic.fft,
     description = "Titanic",
     decision.names = c("Died", "Survived")
     )
```

Here's how to interpret this tree: if *thal* is greater than 3, classify as signal ("+ disease"). For this dataset, 72 cases (18 true noise + 54 true signal) were classified as signal while the remaining 80 cases (152 - 72) moved to the next level. Now, if *cp* is less than 4, classify as noise ("- disease"). Here, of the remaining 80 cases, 50 (45 true noise and 5 true signal) were classified as noise ("- disease"). This left 30 cases which were classified at the final level.

Cumulative classification statistics are showin in the bottom panel of the plot. 

Now let's compare the result to tree # 1. This is a *very* conservative tree with Noise exits on all but the last branch. This tree should have a very low false-alarm rate but (unfortunately) also a very low hit-rate.

```{r, fig.width = 6, fig.height = 6}
plot(titanic.fft,
     which.tree = 1,
     description = "Heart Disease",
     decision.names = c("Healthy", "Disease")
     )
```

Indeed, this tree is very conservative: only 23 cases were classified as signals ("+ disease") at the very end of the tree.

